## Working with GraphQL Queries

GraphQL কুয়েরি হলো GraphQL API-তে ডেটা ফেচ করার জন্য ব্যবহৃত একটি উপাদান। এটি মূলত সার্ভার থেকে ক্লায়েন্টে ডেটা আনার জন্য ব্যবহৃত হয়। GraphQL কুয়েরি স্বতন্ত্রভাবে ডেটার কাঠামো নির্ধারণ করে এবং শুধুমাত্র প্রয়োজনীয় ডেটাই ফিরিয়ে আনে। এতে সার্ভারকে প্রয়োজনীয় ডেটা ঠিকঠাক রিটার্ন করার সুযোগ দেওয়া হয়, যাতে ক্লায়েন্টের প্রয়োজনীয় ডেটার উপর আরও বেশি নিয়ন্ত্রণ থাকে।

এই অধ্যায়ে আমরা বিস্তারিতভাবে আলোচনা করব GraphQL কুয়েরি কীভাবে কাজ করে, কিভাবে কুয়েরি লেখে, এবং কুয়েরির মাধ্যমে ডেটা ফেচ করা যায়।


### ১. GraphQL কুয়েরি কী?

GraphQL কুয়েরি হল একটি রিকোয়েস্ট যার মাধ্যমে ক্লায়েন্ট সার্ভার থেকে ডেটা ফেচ করে। এটি সার্ভারের কাছে ডেটা চাইতে ব্যবহৃত হয় এবং সার্ভার তা ফিরিয়ে দেয়। GraphQL কুয়েরি সাধারণত ফিল্ডের মাধ্যমে নির্দিষ্ট ডেটার অংশ চায়, যেটি সার্ভার রিটার্ন করে। কুয়েরির মূল উদ্দেশ্য হলো শুধুমাত্র প্রয়োজনীয় ডেটা নির্বাচন করা, যা সার্ভারের রিসোর্স বাঁচায় এবং পারফরম্যান্স উন্নত করে।

উদাহরণস্বরূপ, আপনি যদি একটি বইয়ের তালিকা চান, তবে আপনি কুয়েরির মধ্যে শুধু বইয়ের শিরোনাম এবং লেখক চেয়ে নিতে পারেন, যেমন:

```graphql
{
  books {
    title
    author
  }
}
```

এখানে, কুয়েরিটি শুধু `title` এবং `author` ফিরিয়ে দেয়, সার্ভার বাকী ডেটা ফেরত দেয় না। এটি সম্পূর্ণ ফিল্ড এবং ডেটার ওপর নিয়ন্ত্রণ প্রদান করে, যা REST API-তে সম্ভব নয়।


### ২. কুয়েরি রচনার নিয়মাবলী

#### কুয়েরির মৌলিক কাঠামো

GraphQL কুয়েরি সাধারণত একটি নির্দিষ্ট কাঠামো অনুসরণ করে, যেটি সাধারণত নিচের রকম থাকে:

```graphql
query {
  resourceName {
    field1
    field2
    ...
  }
}
```

এখানে, 
- `query` অংশটি কুয়েরির শুরু। এটি ঐচ্ছিক, কারণ কুয়েরি যদি একমাত্র অপারেশন হয়, তবে এটি বাদও রাখা যায়। তবে এটি স্পষ্টত: কুয়েরির উদ্দেশ্য জানাতে ব্যবহার করা হয়।
- `resourceName` হলো সেই রিসোর্স বা ডেটা টাইপ যা আপনি জানতে চান (যেমন: `books`, `users` ইত্যাদি)।
- `{}` এর মধ্যে `field1`, `field2` ইত্যাদি হলো ডেটা ফিল্ড যা আপনি জানতে চান (যেমন: `title`, `author`, `price` ইত্যাদি)।

#### নির্দিষ্ট ডেটা চাওয়া

যখন আপনি কুয়েরি পাঠান, আপনি চাইতে পারেন শুধুমাত্র নির্দিষ্ট ফিল্ড। উদাহরণস্বরূপ, যদি আপনি শুধু বইয়ের শিরোনাম এবং লেখক চাইতে চান, তবে কুয়েরি হবে:

```graphql
{
  books {
    title
    author
  }
}
```

এখানে, সার্ভার শুধুমাত্র `title` এবং `author` ফিরিয়ে দেবে, বাকী কোনো তথ্য ফিরিয়ে দেবে না।

#### অপশনাল আর্গুমেন্টস

কুয়েরি একটি বা একাধিক আর্গুমেন্ট গ্রহণ করতে পারে। যেমন, যদি আপনি কোন নির্দিষ্ট বই চাচ্ছেন, তবে আপনি `id` আর্গুমেন্ট দিয়ে তা নির্দিষ্ট করতে পারেন:

```graphql
{
  book(id: "123") {
    title
    author
  }
}
```

এখানে, `book(id: "123")` কুয়েরি একমাত্র সেই বইটির তথ্য রিটার্ন করবে যার `id` `"123"`।


### ৩. কুয়েরি রেজলভারের সাথে সম্পর্ক

যখন আপনি কুয়েরি পাঠান, সার্ভার কুয়েরির ফিল্ডগুলো খুঁজে বের করতে Resolvers ব্যবহার করে। রেজলভার হলো একটি ফাংশন যেটি কুয়েরি ফিল্ডের জন্য ডেটা রিটার্ন করে।

ধরা যাক, আমরা একটি বইয়ের তালিকা চাই:

```graphql
{
  books {
    title
    author
  }
}
```

এই কুয়েরি সঠিকভাবে কাজ করার জন্য, সার্ভারের রেজলভার ফাংশনটি এমন হতে হবে:

```javascript
const resolvers = {
  Query: {
    books: () => {
      return [
        { title: "Book 1", author: "Author 1" },
        { title: "Book 2", author: "Author 2" }
      ];
    }
  }
};
```

এখানে, `books` রেজলভারটি একটি অ্যারে রিটার্ন করছে যা দুটি বইয়ের তথ্য ধারণ করে। সার্ভার এই তথ্যকে কুয়েরি ফিল্ডের মাধ্যমে ক্লায়েন্টে পাঠিয়ে দেয়।


### ৪. কুয়েরি অপারেশনগুলোর মধ্যে পার্থক্য

#### কুয়েরি এবং মিউটেশন

যেহেতু GraphQL কুয়েরির মাধ্যমে শুধুমাত্র ডেটা ফেচ করা হয়, সুতরাং যদি আপনি ডেটা তৈরি, আপডেট বা ডিলিট করতে চান, তবে Mutation ব্যবহার করতে হবে।

একটি Mutation কুয়েরি যেমন:

```graphql
mutation {
  addBook(title: "New Book", author: "New Author") {
    title
    author
  }
}
```

এটি নতুন একটি বই ডাটাবেসে যোগ করবে এবং `title` ও `author` ফিল্ডের মান রিটার্ন করবে। এটি কেবল ডেটা পরিবর্তনের জন্য ব্যবহৃত হয়, কিন্তু কুয়েরি শুধুমাত্র ডেটা ফেচ করার জন্য ব্যবহৃত হয়।


### ৫. কুয়েরির মাধ্যমে Nested ডেটা ফেচ করা

GraphQL-এর শক্তিশালী বৈশিষ্ট্য হলো, আপনি একাধিক লেভেলের ডেটা একটি কুয়েরির মাধ্যমে ফেচ করতে পারবেন। উদাহরণস্বরূপ, যদি একটি বইয়ের তথ্যের সাথে সংশ্লিষ্ট লেখকের তথ্যও জানতে চান, তাহলে আপনি নিম্নলিখিত কুয়েরি করতে পারেন:

```graphql
{
  books {
    title
    author {
      name
      bio
    }
  }
}
```

এখানে, `author` একটি অবজেক্ট এবং এটি `name` এবং `bio` ফিল্ড রিটার্ন করবে। এইভাবে আপনি একাধিক লেভেলের ডেটা একটি কুয়েরির মাধ্যমে রিটার্ন করতে পারেন।


### ৬. কুয়েরি আলিয়াস (Query Alias)

Query Alias একটি বিশেষ সুবিধা, যা আপনাকে একই কুয়েরির একাধিক ইনস্ট্যান্স ফেচ করার সুযোগ দেয়। উদাহরণস্বরূপ, যদি আপনি একসাথে দুইটি বই চান কিন্তু তাদের আলাদা নাম রাখতে চান:

```graphql
{
  firstBook: book(id: "1") {
    title
    author
  }
  secondBook: book(id: "2") {
    title
    author
  }
}
```

এখানে, `firstBook` এবং `secondBook` হলো আলিয়াস, যেগুলো একই কুয়েরির দুইটি আলাদা ইনস্ট্যান্স নির্দেশ করছে। এর ফলে, আপনি একই টাইপের ডেটা ভিন্ন নামের সাথে নিয়ে আসতে পারবেন।


### ৭. কুয়েরি ভেরিয়েবলস (Query Variables)

Query Variables কুয়েরি লেখার সময় ভ্যালু প্রদান করা যায় যা পরে কুয়েরি এক্সিকিউট করার সময় বসানো হয়। এটি আপনাকে পুনরাবৃত্ত কুয়েরি লেখার সুবিধা দেয়।

উদাহরণস্বরূপ, আপনি যদি ডাইনামিক আর্গুমেন্ট প্রদান করতে চান, তবে আপনি ভেরিয়েবল ব্যবহার করতে পারেন:

```graphql
query GetBook($id: ID!) {
  book(id: $id) {
    title
    author
  }
}
```

এখানে, `$id` হলো ভেরিয়েবল। কুয়েরি এক্সিকিউট করার সময় ভেরিয়েবল মান দেয়া হবে।


GraphQL কুয়েরি একটি অত্যন্ত শক্তিশালী টুল যা সার্ভার থেকে প্রয়োজনীয় ডেটা ফেচ করার জন্য ব্যবহৃত হয়। এর সুবিধা হলো এটি অত্যন্ত নমনীয়, কারণ এটি শুধুমাত্র প্রয়োজনীয় ফিল্ড ডেটা ফিরিয়ে দেয় এবং ডেটার কাঠামো সরাসরি ক্লায়েন্ট দ্বারা নির্ধারণ করা যায়। কুয়েরি একাধিক আর্গুমেন্ট, ফিল্ড এবং ভেরিয়েবলস ব্যবহার করে আরও বেশি ক্ষমতাশালী হতে পারে। GraphQL কুয়েরির মাধ্যমে ডেটার উপর পূর্ণ নিয়ন্ত্রণ পাওয়া যায়, যা API-তে পারফরম্যান্স এবং কার্যকারিতা উন্নত করতে সাহায্য করে।