## GraphQL Mutations

GraphQL Mutation হল সেই পদ্ধতি যা ব্যবহার করে ডেটা পরিবর্তন বা আপডেট করা হয়। যখন আপনি GraphQL API-তে ডেটা পরিবর্তন, সন্নিবেশ, অথবা ডিলিট করতে চান, তখন আপনি Mutation অপারেশন ব্যবহার করবেন। এর মাধ্যমে, আপনি সার্ভারের ডেটাবেসে ডেটার কোনো অংশ পরিবর্তন করতে পারবেন, যেমন নতুন ডেটা যুক্ত করা, পুরনো ডেটা আপডেট করা বা মুছে ফেলা। 

এই অধ্যায়ে আমরা GraphQL মিউটেশন কীভাবে কাজ করে, কিভাবে এটি লিখে, এবং এর মাধ্যমে ডেটা পরিচালনা করা যায়, তা বিস্তারিতভাবে ব্যাখ্যা করব।


### ১. Mutation কী?

Mutation হল GraphQL-এর একটি বিশেষ ধরনের অপারেশন যা ডেটার পরিবর্তন সাধন করে। যখন ক্লায়েন্ট সার্ভার থেকে ডেটা চায়, তখন Query ব্যবহার করা হয়, কিন্তু যখন ডেটা পরিবর্তন করতে হয়, তখন Mutation ব্যবহার করা হয়। এটি একটি POST রিকোয়েস্টের মতোই কাজ করে, যেখানে ক্লায়েন্ট সার্ভারের কাছে ডেটা পরিবর্তন করার জন্য রিকোয়েস্ট পাঠায় এবং সার্ভার সেই পরিবর্তনটি অনুমোদন করে।

ডেটা পরিবর্তনকারী এই অপারেশনগুলি Create, Update, এবং Delete এর মতো কার্যকলাপ সমর্থন করে। যেমন:
- নতুন ডেটা তৈরি করা (Create)
- পুরনো ডেটা আপডেট করা (Update)
- ডেটা মুছে ফেলা (Delete)


### ২. Mutation Syntax

যেমন কুয়েরির ক্ষেত্রে ডেটার নির্বাচন করা হয়, তেমনি মিউটেশনের ক্ষেত্রেও ডেটার পরিবর্তন করার জন্য একটি নির্দিষ্ট কাঠামো অনুসরণ করতে হয়। সাধারণত একটি মিউটেশন নিচের মত দেখতে হয়:

```graphql
mutation {
  mutationName {
    field1
    field2
    ...
  }
}
```

এখানে:
- mutation হল মিউটেশন অপারেশন, যা ডেটা পরিবর্তনের উদ্দেশ্যে ব্যবহৃত হয়।
- mutationName হলো সেই অপারেশন বা কার্যকলাপের নাম (যেমন `createBook`, `updateUser` ইত্যাদি)।
- `{}` এর মধ্যে দেয়া ফিল্ডগুলো হল সেই তথ্য যেগুলো পরিবর্তন বা তৈরি করার জন্য ব্যবহৃত হবে।


### ৩. Mutation এবং Query এর পার্থক্য

Query এবং Mutation এর মধ্যে মূল পার্থক্য হলো, Query শুধুমাত্র ডেটা পড়তে বা ফেচ করতে ব্যবহৃত হয়, আর Mutation ডেটা পরিবর্তন করতে ব্যবহৃত হয়। Query শুধুমাত্র ডেটা সিলেক্ট করে, কিন্তু Mutation ডেটার মধ্যে কিছু পরিবর্তন আনে।

- Query: ডেটা পড়া (Read operation)
- Mutation: ডেটা পরিবর্তন করা (Write operation)

এটি খুব গুরুত্বপূর্ণ যে, মিউটেশন সার্ভারে ডেটার অবস্থা পরিবর্তন করতে পারে, তাই মিউটেশন প্রক্রিয়া ক্লায়েন্টে যে কোনো তথ্যের পরিবর্তন ঘটাতে পারে।


### ৪. Mutation Operations

#### Create (নতুন ডেটা তৈরি)

একটি মিউটেশন সাধারণত ডেটা তৈরি করতে ব্যবহৃত হয়। যেমন, যদি আপনি একটি নতুন বই তৈরি করতে চান, আপনি নীচের মতো একটি মিউটেশন লিখতে পারেন:

```graphql
mutation {
  addBook(title: "New Book", author: "Author Name") {
    id
    title
    author
  }
}
```

এখানে:
- `addBook` হলো মিউটেশন অপারেশন, যা একটি নতুন বই তৈরি করতে ব্যবহৃত হবে।
- `title` এবং `author` হলো প্যারামিটার যা নতুন বইয়ের জন্য প্রেরিত হবে।
- মিউটেশন শেষে, `id`, `title`, এবং `author` রিটার্ন করবে, যা আমাদের নতুন বইয়ের তথ্য।

### Update (ডেটা আপডেট করা)

কিছু সময় আমাদের ডেটার একটি অংশ আপডেট করার প্রয়োজন হয়। ধরুন, আপনি একটি বইয়ের শিরোনাম বা লেখক পরিবর্তন করতে চান। তাহলে মিউটেশন এরকম হতে পারে:

```graphql
mutation {
  updateBook(id: "123", title: "Updated Book Title", author: "Updated Author") {
    id
    title
    author
  }
}
```

এখানে:
- `updateBook` মিউটেশনটি বইয়ের তথ্য আপডেট করতে ব্যবহৃত হবে।
- `id`, `title`, এবং `author` হল প্যারামিটারস যা আপডেট করা হবে।
- মিউটেশনটি নতুন `title` এবং `author` রিটার্ন করবে।

#### Delete (ডেটা মুছে ফেলা)

এছাড়া, মিউটেশন ব্যবহার করে ডেটা মুছে ফেলারও ব্যবস্থা রয়েছে। যেমন, একটি বই মুছে ফেলার জন্য:

```graphql
mutation {
  deleteBook(id: "123") {
    id
    title
  }
}
```

এখানে:
- `deleteBook` মিউটেশনটি বইটি ডিলিট করবে।
- এটি বইয়ের `id` এবং `title` রিটার্ন করবে, যেটি আমরা ডিলিট করার আগে দেখতে চাই।


### ৫. Mutation Variables

যেমন কুয়েরিতে ভেরিয়েবল ব্যবহার করা যায়, তেমনি মিউটেশনে ভেরিয়েবল ব্যবহার করে ডেটা পরিবর্তন করতে পারবেন। এর মাধ্যমে, আপনি কাস্টম ভ্যালু প্রদান করে মিউটেশনকে আরও ফ্লেক্সিবল করতে পারেন।

উদাহরণস্বরূপ:

```graphql
mutation addBook($title: String!, $author: String!) {
  addBook(title: $title, author: $author) {
    id
    title
    author
  }
}
```

এখানে:
- `$title` এবং `$author` হল ভেরিয়েবল, যেগুলো মিউটেশনের আর্গুমেন্ট হিসেবে কাজ করবে।
- ক্লায়েন্ট যখন মিউটেশন পাঠাবে, তখন ভেরিয়েবল মান প্রদান করবে। যেমন:

```json
{
  "title": "New Book Title",
  "author": "New Author Name"
}
```


### ৬. Nested Mutations

GraphQL-এ আপনি একাধিক মিউটেশন একসাথে করতে পারেন, যেটাকে বলা হয় nested mutations। একাধিক সম্পর্কিত ডেটার পরিবর্তন করার জন্য এটি ব্যবহৃত হয়। যেমন, আপনি যদি একটি বই তৈরি করার পাশাপাশি লেখকের তথ্যও আপডেট করতে চান:

```graphql
mutation {
  addBook(title: "New Book", author: "Author Name") {
    id
    title
    author
  }
  updateAuthor(id: "456", name: "Updated Author Name") {
    id
    name
  }
}
```

এখানে:
- `addBook` মিউটেশনটি নতুন বই তৈরি করবে।
- `updateAuthor` মিউটেশনটি লেখকের নাম আপডেট করবে।


### ৭. Optimistic UI Updates

GraphQL মিউটেশন যখন ক্লায়েন্ট থেকে সার্ভারে পাঠানো হয়, তখন সার্ভার থেকে রেসপন্স আসার আগেই UI আপডেট করতে চাইলে Optimistic UI পদ্ধতি ব্যবহার করা হয়। এটি সার্ভার থেকে রেসপন্স আসার আগে UI আপডেট করার সুযোগ দেয়, যাতে ব্যবহারকারীরা দ্রুত প্রতিক্রিয়া পান।


### ৮. Error Handling in Mutations

GraphQL মিউটেশন এপিআই যখন কোনো ভুল পায়, তখন সাধারণত এর মাধ্যমে errors ফিরিয়ে দেয়। আপনি যদি মিউটেশন এর মাধ্যমে কোনো ভুল হয়, তাহলে সেই ভুলটি ক্লায়েন্টে রিপোর্ট করা হবে। 

এখানে একটি উদাহরণ:

```graphql
mutation {
  addBook(title: "New Book", author: "Author") {
    id
    title
  }
}
```

যদি কোনো কারণে `title` ফিল্ডটি অপর্যাপ্ত বা ভুল হয়, তাহলে সার্ভার একটি error প্রদান করবে:

```json
{
  "errors": [
    {
      "message": "Title is required",
      "locations": [{ "line": 2, "column": 3 }],
      "path": ["addBook"]
    }
  ]
}
```

এটি ক্লায়েন্টকে সমস্যা সম্পর্কে অবহিত করে এবং ব্যবহারকারীকে সংশোধন করতে সাহায্য করে।


GraphQL মিউটেশন একটি গুরুত্বপূর্ণ অংশ যা ডেটার পরিবর্তন, সন্নিবেশ, এবং ডিলিটের জন্য ব্যবহৃত হয়। এটি সার্ভার এবং ক্লায়েন্টের মধ্যে যোগাযোগকে আরও শক্তিশালী এবং কার্যকরী করে তোলে। মিউটেশনের মাধ্যমে, আপনি ডেটা পরিচালনা করার ক্ষমতা অর্জন করতে পারেন, এবং বিভিন্ন ভেরিয়েবল, আর্গুমেন্ট, এবং অপ্টিমিস্টিক UI এর মতো শক্তিশালী ফিচার ব্যবহার করে অ্যাপ্লিকেশনের পারফরম্যান্স এবং ব্যবহারকারীর অভিজ্ঞতা উন্নত করতে পারেন।